# Mongo 的常见内容

## ObjectId

初用mongo 最先见到的内容应该就是这个了。简单来说它是 内部生成的_id 字段，用来唯一的标识这个文档。

### 和MySql的 自增ID 有什么不同

mysql 的id 是单机情况下的通过内部竞争锁来实现自增并且分配的。只是适用单机情况下，如果在分布式的环境中，即使通过分布式锁能实现，效率
也难以保证。

mongo 的id 是一个ObjectId类型的对象，是根据根据 当前时间（4字节），机器（3字节），进程（2字节），自增数（3字节）生成的。
适用于分布式的环境，并且在分布式环境下不需要考虑ID重复的问题。

（注意：mongo里面的这个内部的自增数能保证 此时 此地 此进程 唯一，即使在内部使用多线程生成ID，那么只需要加一个线程锁也能高效的实现。）

### 如果要让mysql的ID 适应分布式环境应该怎么做

客户端自己生成Id， 可以根据 使用uuid进行生成，提供node 参数 可以是 分组+机器号， 然后提供一个clock_seq参数 可以是 进程号 + 自增ID。

(注意：uuid1 里面已经提供了时间)